---
layout:     post
title:      指针事件
subtitle:   
date:       
author:     
header-img: 
catalog: true
tags:
    - JavaScript
    - 事件
---
# 指针事件
指针事件（Pointer Events）是一种用于处理来自各种输入设备（例如鼠标、触控笔和触摸屏等）的输入信息的现代化解决方案。
## 事件类型
指针事件的命名方式和鼠标事件类似：
![img.png](/img/指针事件类型.png)

我们可以把代码中的 mouse<event> 都替换成 pointer<event>，程序仍然正常兼容鼠标设备。
但是，我们可能需要在 CSS 中的某些地方添加 touch-action: none。
## 指针事件属性
指针事件具备和鼠标事件完全相同的属性，以及一些其他属性：
- pointerId —— 触发当前事件的指针唯一标识符。
浏览器生成的。使我们能够处理多指针的情况，例如带有触控笔和多点触控功能的触摸屏（下文会有相关示例）。
- pointerType —— 指针的设备类型。必须为字符串，可以是：“mouse”、“pen” 或 “touch”。
- isPrimary —— 当指针为首要指针（多点触控时按下的第一根手指）时为 true。
- width —— 指针（例如手指）接触设备的区域的宽度。对于不支持的设备（如鼠标），这个值总是 1。
- height —— 指针（例如手指）接触设备的区域的长度。对于不支持的设备，这个值总是 1。
- pressure —— 触摸压力，是一个介于 0 到 1 之间的浮点数。对于不支持压力检测的设备，这个值总是 0.5（按下时）或 0。
- tangentialPressure —— 归一化后的切向压力（tangential pressure）。
- tiltX, tiltY, twist —— 针对触摸笔的几个属性，用于描述笔和屏幕表面的相对位置。

可以在 [规范文档](https://w3c.github.io/pointerevents/#pointerevent-interface) 中查看更多有关它们的详细信息。
## 多点触控
当用户用一根手指触摸触摸屏的某个位置，然后将另一根手指放在该触摸屏的其他位置时，会发生以下情况：

1. 第一个手指触摸：
pointerdown 事件触发，isPrimary=true，并且被指派了一个 pointerId。
2. 第二个和后续的更多个手指触摸（假设第一个手指仍在触摸）：
pointerdown 事件触发，isPrimary=false，并且每一个触摸都被指派了不同的 pointerId。

请注意：pointerId 不是分配给整个设备的，而是分配给每一个触摸的。如果 5 根手指同时触摸屏幕，我们会得到 5 个 pointerdown 事件和相应的坐标以及 5 个不同的 pointerId。

当用户移动或抬起某根手指时，我们会得到和 pointerdown 事件具有相同 pointerId 的 pointermove 或 pointerup 事件。