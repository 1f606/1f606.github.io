---
layout:     post
title:      弹窗
subtitle:   
date:       2023-3-16
author:     sq
header-img: 
catalog: true
tags:
    - 弹窗
---
# 弹窗
打开一个弹窗的语法是 `window.open(url, name, params)`

**name**

新窗口的名称。每个窗口都有一个 window.name，在这里我们可以指定哪个窗口用于弹窗。如果已经有一个这样名字的窗口 —— 将在该窗口打开给定的 URL，否则会打开一个新窗口。

**params**

新窗口的配置字符串。它包括设置，用逗号分隔。参数之间不能有空格，例如：`width=200,height=100`。

params 的设置项：
* 位置:
  * left/top（数字）—— 屏幕上窗口的左上角的坐标。这有一个限制：不能将新窗口置于屏幕外（offscreen）。
  * width/height（数字）—— 新窗口的宽度和高度。宽度/高度的最小值是有限制的，因此不可能创建一个不可见的窗口。
* 窗口功能：
  * menubar（yes/no）—— 显示或隐藏新窗口的浏览器菜单。
  * toolbar（yes/no）—— 显示或隐藏新窗口的浏览器导航栏（后退，前进，重新加载等）。
  * location（yes/no）—— 显示或隐藏新窗口的 URL 字段。Firefox 和 IE 浏览器不允许默认隐藏它。
  * status（yes/no）—— 显示或隐藏状态栏。同样，大多数浏览器都强制显示它。
  * resizable（yes/no）—— 允许禁用新窗口大小调整。不建议使用。
  * scrollbars（yes/no）—— 允许禁用新窗口的滚动条。不建议使用。

如果params有一个参数字符串，但是某些 yes/no 功能被省略了，那么被省略的功能则被默认值为 no。

left/top width/height不存在或值无效 会有默认行为

还有一些不太受支持的特定于浏览器的功能，查阅MDN

**返回值**

调用会返回对新窗口的引用。它可以用来操纵弹窗的属性，更改位置，甚至更多操作。

## 阻止弹窗
大多数浏览器都会通过阻止弹窗来保护用户免受恶意弹窗。

如果弹窗是在用户触发的事件处理程序（如 onclick）之外调用的，大多数浏览器都会阻止此类弹窗。

但如果弹窗是从 onclick 打开的，但是在 setTimeout 之后打开可能弹窗不会出现，各个浏览器能接受的延迟时间不同。

## 同源策略
只有在窗口是同源的时，窗口才能自由访问彼此的内容（相同的协议://domain:port）。

否则，例如，如果主窗口来自于 site.com，弹窗来自于 gmail.com，则处于安全性考虑，这两个窗口不能访问彼此的内容。

## 从弹窗访问窗口
弹窗也可以使用 window.opener 来访问 opener 窗口。除了弹窗之外，对其他所有窗口来说，window.opener 均为 null。

## 关闭弹窗
关闭一个窗口：win.close()。只对弹窗有效

检查一个窗口是否被关闭：win.closed。

## 移动和调整大小
有一些方法可以移动一个窗口，或者调整一个窗口的大小，但仅适用于弹窗：
- win.moveBy(x,y)将窗口相对于当前位置向右移动 x 像素，并向下移动 y 像素。允许负值（向上/向左移动）。
- win.moveTo(x,y)将窗口移动到屏幕上的坐标 (x,y) 处。
- win.resizeBy(width,height)根据给定的相对于当前大小的 width/height 调整窗口大小。允许负值。
- win.resizeTo(width,height)将窗口调整为给定的大小。

## 弹窗的聚焦/失焦
从理论上讲，使用 window.focus() 和 window.blur() 方法可以使窗口获得或失去焦点。

此外，这里还有 focus/blur 事件，可以捕获到访问者聚焦到一个窗口和切换到其他地方的时刻。但在实际中它们被进行了严格地限制以保护用户免受广告和恶意页面的侵害。

例如，移动端浏览器通常会完全忽略 window.focus()。并且，当弹窗是在单独的选项卡而不是新窗口中打开时，也无法进行聚焦。

尽管如此，在某些情况下，此类调用确实有效且很有用。