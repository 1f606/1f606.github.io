---
layout:     post
title:      微信H5问题及解决
subtitle:   
date:       2023-2-24
author:     sq
header-img: 
catalog: true
tags:
    - 微信H5
---
# 问题及解决方法
## 微信H5长按保存图片
环境： 微信版本8.0.28

问题：
`URL.createObjectURL` 作为 src的图片，长按保存后，图片长宽是图片显示的宽和高，而非实际高度，根据观察与devicePixelRatio有关。
在iphone xr上，devicePixelRatio为2，宽331高478，保存后图片宽高为662X956.
如果不为图片设置宽高，图片超出屏幕大小后，长按保存，保存的图片中只有屏幕可视区域的图片，其他部分为空白。

在谷歌浏览器中长按正常保存。

解决方法：

需要使用a标签设置download，调用click方法下载图片。

## 关于外链
微信改了外链规则，如果你是点聊天界面的url进去分享出来的是 URL ，（除非是在公众号对话页面就正常）

如果你是扫描二维码或别人分享进去分享就是你设置的分享内容。

微信分享链接不显示设置的：标题、描述、图片。试试先收藏分享链接，再从收藏的分享链接打开页面然后分享